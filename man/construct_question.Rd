% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/construct_question.R
\name{construct_question}
\alias{construct_question}
\title{Constructs a survey question from a data frame}
\usage{
construct_question(
  df,
  question_text,
  language,
  choices = NULL,
  answers = NULL,
  master = "EN",
  question_id = "Q1",
  primary_attribute = "Q1",
  secondary_attribute = "New question",
  data_export_tag = "Q1",
  question_description = "first_question",
  question_type = "MC"
)
}
\arguments{
\item{df}{\code{tibble}}

\item{question_text}{variable name (unquoted) with the question text}

\item{language}{variable name (unquoted) with the language code}

\item{choices}{variable name (unquoted) with the choice \code{tibble}  (default: NULL)}

\item{answers}{variable name (unquoted) with the answer \code{tibble} (default: NULL)}

\item{master}{language code of master language (default: "EN")}

\item{question_id}{question ID (default: Q1)}

\item{primary_attribute}{primary attribute string (default: Q1)}

\item{secondary_attribute}{secondary attribute string (default: "new question")}

\item{data_export_tag}{data export tag (default: Q1)}

\item{question_description}{question description}

\item{question_type}{either "MC", "TE", "DB", or "Matrix"}
}
\value{
List of survey elements.
}
\description{
This function takes a nested \code{tibble} representing a survey question and converts it into a survey questions that can be added to a qsf file using the \code{\link{append_survey()}} function. The function does the opposite of \code{\link{get_questions()}}.
}
\details{
The argument \code{choice} can be left empty (NULL) and will be ignored if \code{question_type='DB'}. The argument \code{answer} must be supplied if \code{question_type='Matrix'}. 

The \code{tibble} for \code{choice} and \code{answer} must include two: a column with numeric IDs determining the display order and the a column with the labels for each choice. The column names are ignored.

For surveys constructed via the online editor, \code{primary_attribute} and \code{question_id} are typically identical and can not be modified by the user. The argument \code{question_id} must be unique within the survey and follow one of three schemes: 
\itemize{
 \item Sequential numbering: Q1, Q2, ...
 \item Block numbering: Q1.1, Q1.2... (Block 1); Q2.1, Q2.2, ... (Block 2)
 \item Internal ID numbering: QID1, QID2, ...
}
For sequential and block numbering "Q" can be replaced by any other capitalized letter from the Latin alphabet. When using \code{\link{write_qsf}} these conventions are checked.  

\if{html}{\figure{screenshot.png}{options: width=100 alt="Screenshot Qualtrics online editor"}}

The argument \code{secondary_attribute} controls the question label shown in the online editor. In the picture above, "sex" is the question label. The argument data_export_tag controls the name of the variable in the csv file with the collected survey data. When constructing a survey via the online editor, the \code{data_export_tag} is identical to \code{question_id} as long as the user doesn't modify. In the picture above, the data export tag is "Q1". 

The argument \code{question_type} must be one of four options: 
\itemize{
 \item MC : Multiple/single choice question 
 \item Matrix : Multiple choice, multiple answer question
 \item TE : Text entry question
 \item DB : Descriptive text only (no choices/answers)
}

Please note, that all questions with \code{question_type=MC} are single choice by default. See \code{\link{update_question}} for examples on how to change that.
}
\examples{
q <- tibble(
		QuestionText="How can we contact you?",
		Choices = list(tibble(
					id=c(1,2),
					label=c("Email","SMS"))),
		Language = "EN"
		)

sq <- construct_question(q, 
    question_text=QuestionText, 
    choices=Choices, 
    language=Language, 
    master="EN",  
    question_id="Q1",
    primary_attribute="Q1",
    secondary_attribute="contact",
    data_export_tag="contact", 
    question_description="Contact question", 
    question_type = "MC") 

qsf <- create_survey(sq)


}
